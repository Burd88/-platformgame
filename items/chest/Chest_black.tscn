[gd_scene load_steps=16 format=2]

[ext_resource path="res://items/chest/S_ItemHeavyOutline_ChestPurple_00.png" type="Texture" id=1]
[ext_resource path="res://items/chest/Image12.png" type="Texture" id=2]
[ext_resource path="res://items/chest/Panel.gd" type="Script" id=3]
[ext_resource path="res://items/chest/ItemList.gd" type="Script" id=4]
[ext_resource path="res://resourse/inventory_panel.png" type="Texture" id=5]
[ext_resource path="res://icon1.png" type="Texture" id=6]
[ext_resource path="res://resourse/button_Style_tex.tres" type="StyleBox" id=7]
[ext_resource path="res://fonts/main_menu_button.tres" type="DynamicFont" id=8]

[sub_resource type="GDScript" id=1]
script/source = "extends Area2D

# Declare member variables here. Examples:
# var a = 2
# var b = \"text\"
var useable = true
var target
# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	if target:
		if global_position.distance_to(target.global_position) > 50:
			$CanvasLayer/Panel.hide()
	pass




func _on_Chest_black_area_entered(area):
	if area.name == \"use\":
		$CanvasLayer/Panel.show()
		target = area
	pass # Replace with function body.




func _on_ItemList_item_selected(index):
	var id_item = $CanvasLayer/Panel/ItemList.get_item_metadata(index)[\"id\"]

	if get_parent().get_node(\"Player/inventary/inventory/bag1\"):
		get_parent().get_node(\"Player/inventary/inventory/bag1\").update_slot(Global_Player.inventory_addItem(int(id_item)))
		$CanvasLayer/Panel/ItemList.remove_item(index)
	pass # Replace with function body.
"

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 10, 6.04535 )

[sub_resource type="StyleBoxTexture" id=4]
texture = ExtResource( 2 )
region_rect = Rect2( 0, 0, 220, 220 )

[sub_resource type="StyleBoxEmpty" id=3]

[sub_resource type="Gradient" id=61]
offsets = PoolRealArray( 0, 0.895161, 1 )
colors = PoolColorArray( 0.968627, 0.184314, 0.184314, 1, 0.992916, 0.815813, 0.815813, 1, 1, 1, 1, 1 )

[sub_resource type="GradientTexture" id=62]
gradient = SubResource( 61 )

[sub_resource type="StyleBoxTexture" id=63]
texture = ExtResource( 5 )
region_rect = Rect2( 0, 0, 400, 120 )

[node name="Chest_black" type="Area2D"]
script = SubResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 2 )

[node name="Sprite" type="Sprite" parent="."]
texture = ExtResource( 1 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Panel" type="Panel" parent="CanvasLayer"]
margin_left = 530.0
margin_top = 277.0
margin_right = 750.0
margin_bottom = 497.0
custom_styles/panel = SubResource( 4 )
script = ExtResource( 3 )

[node name="ItemList" type="ItemList" parent="CanvasLayer/Panel"]
margin_left = 68.0
margin_top = 77.0
margin_right = 154.0
margin_bottom = 164.0
custom_styles/bg = SubResource( 3 )
custom_constants/icon_margin = -20
script = ExtResource( 4 )

[node name="WindowDialog_ItemMenu" type="WindowDialog" parent="CanvasLayer/Panel"]
margin_left = 427.0
margin_top = 108.0
margin_right = 880.0
margin_bottom = 438.0
custom_icons/close_highlight = SubResource( 62 )
custom_styles/panel = SubResource( 63 )

[node name="ItemMenu_TextureFrame_Icon" type="TextureRect" parent="CanvasLayer/Panel/WindowDialog_ItemMenu"]
margin_left = 185.784
margin_top = 38.1606
margin_right = 249.784
margin_bottom = 102.161
texture = ExtResource( 6 )
stretch_mode = 1

[node name="ItemMenu_RichTextLabel_ItemInfo" type="RichTextLabel" parent="CanvasLayer/Panel/WindowDialog_ItemMenu"]
margin_left = 31.0
margin_top = 111.0
margin_right = 423.0
margin_bottom = 237.0
bbcode_enabled = true

[node name="ItemMenu_Button_DropItem" type="Button" parent="CanvasLayer/Panel/WindowDialog_ItemMenu"]
margin_left = 138.54
margin_top = 246.729
margin_right = 302.54
margin_bottom = 286.729
custom_styles/hover = ExtResource( 7 )
custom_styles/pressed = ExtResource( 7 )
custom_styles/focus = ExtResource( 7 )
custom_styles/disabled = ExtResource( 7 )
custom_styles/normal = ExtResource( 7 )
custom_fonts/font = ExtResource( 8 )
text = "Кнопка"
[connection signal="area_entered" from="." to="." method="_on_Chest_black_area_entered"]
[connection signal="item_rmb_selected" from="CanvasLayer/Panel/ItemList" to="CanvasLayer/Panel" method="_on_ItemList_item_rmb_selected"]
[connection signal="item_selected" from="CanvasLayer/Panel/ItemList" to="." method="_on_ItemList_item_selected"]
[connection signal="pressed" from="CanvasLayer/Panel/WindowDialog_ItemMenu/ItemMenu_Button_DropItem" to="CanvasLayer/Panel" method="_on_ItemMenu_Button_DropItem_pressed"]
